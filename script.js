const translations = {
  'pt-br': {
    about: 'Sobre mim',
    'about-text': 'Sou uma pessoa curiosa por natureza, gosto de entender como as coisas funcionam, de aprender algo novo todos os dias e de transformar pequenas descobertas em algo útil. Tenho um lado bem analítico, mas também criativo: adoro resolver problemas, pensar em soluções diferentes e ver ideias ganharem forma.',
    'about-text-2': 'Nos momentos livres, gosto de jogar videogame, ler, estar perto da natureza e participar das atividades do movimento escoteiro, que me ensinou muito sobre empatia, liderança e serviço ao próximo.',
    'about-text-3': 'Sou movida por desafios, por conexões genuínas e pela vontade constante de crescer como profissional, mas principalmente como pessoa.',
    'about-photo-alt': 'Foto de Dhara Simic',
    
    experience: 'Experiências',
    'experience-text': 'Aqui você pode descrever suas experiências profissionais, projetos realizados, tecnologias utilizadas e conquistas na área de Quality Assurance.',
    'experience-text-2': 'Detalhe seus principais trabalhos, responsabilidades e como cada experiência contribuiu para seu crescimento profissional.',
    'experience-photo-alt': 'Experiência Profissional de Dhara',
    
    curiosities: 'Curiosidades',
    'curiosities-text': 'Sou escoteira desde 2018 e cresci dentro do movimento, que me ensinou sobre trabalho em equipe, liderança e cuidado com as pessoas e o mundo. Participo de ações de limpeza, trilhas e experiências que me lembram que conhecimento de vida é tão importante quanto o técnico.',
    'curiosities-text-2': 'Fora do uniforme, sou curiosa por natureza: adoro ler, montar quebra-cabeças enormes e ouvir música. Shows e festivais me encantam pela energia única que só a música ao vivo proporciona.',
    'curiosities-text-3': 'Essas paixões refletem quem eu sou: alguém que gosta de aprender, se conectar e explorar o mundo.',
    'curiosities-photo-alt': 'Atividades de Voluntariado',
    
    academic: 'Vida Acadêmica',
    'academic-text': 'Atualmente curso Análise e Desenvolvimento de Sistemas na FATEC Rubens Lara, onde venho construindo minha base em tecnologia e explorando diferentes áreas que me despertam interesse.',
    'academic-text-2': 'Apesar de a faculdade ser apenas uma parte do meu caminho, sempre busco ir além do conteúdo das aulas. Tenho aprendido muito por conta própria, fazendo cursos e projetos paralelos (disponíveis no meu GitHub), e gosto de transformar esses aprendizados em experiências práticas.',
    'academic-text-3': 'Pra mim, estudar é mais sobre curiosidade e evolução constante do que sobre títulos, e é isso que guia minha jornada acadêmica até aqui.',
    'academic-photo-alt': 'Vida Acadêmica de Dhara',
    
    // Timeline translations
    'timeline-date-1': 'Fevereiro 2025',
    'timeline-title-1': 'Início na Consultoria ModalGR',
    'timeline-desc-1': 'Iniciei na consultoria ModalGR (atual Mosten) através do processo de formação como QA estagiária, dando meus primeiros passos na área de Quality Assurance.',
    'modalgr-photo-alt': 'ModalGR/Mosten',
    
    'timeline-date-2': 'Abril 2025',
    'timeline-title-2': 'Efetivação QA Jr',
    'timeline-desc-2': 'Fui efetivada em tempo recorde na empresa, me tornando QA Jr e demonstrando meu comprometimento e capacidade de aprendizado na área.',
    
    'timeline-date-3': 'Atualmente',
    'timeline-title-3': 'QA Jr na Mosten',
    'timeline-desc-3': 'Sigo como QA Jr na empresa Mosten, executando testes manuais e testes automatizados via Cypress.. Utilizo o Azure DevOps para organizar tasks e manter uma pipeline de testes automatizados que executa a cada alteração em produção, mantendo um fluxo de testes contínuos e evitando erros humanos.',
    'current-work-photo-alt': 'Trabalho Atual',
    
    'qa-engineer': 'ANALISTA DE QUALIDADE',
    'portfolio-subtitle': 'Portfólio de Quality Assurance',
    'get-in-touch': 'Entre em contato',
    'add-photo': 'Adicione sua foto aqui',
    
    // Contact section
    'contact': 'Contatos',
    'email': 'Email',
    'phone': 'Telefone',
    'github': 'GitHub',
    'linkedin': 'LinkedIn'
  },
  en: {
    about: 'About Me',
    'about-text': 'I am naturally curious, I like to understand how things work, to learn something new every day, and to transform small discoveries into something useful. I have both an analytical and creative side: I love solving problems, thinking of different solutions, and seeing ideas take shape.',
    'about-text-2': 'In my free time, I enjoy playing video games, reading, being close to nature, and participating in scouting activities, which has taught me a lot about empathy, leadership, and service to others.',
    'about-text-3': 'I am driven by challenges, genuine connections, and the constant desire to grow as a professional, but mainly as a person.',
    'about-photo-alt': 'Photo of Dhara Simic',
    
    experience: 'Experience',
    'experience-text': 'Here you can describe your professional experiences, completed projects, technologies used, and achievements in the Quality Assurance field.',
    'experience-text-2': 'Detail your main jobs, responsibilities, and how each experience contributed to your professional growth.',
    'experience-photo-alt': 'Dhara\'s Professional Experience',
    
    curiosities: 'Curiosities',
    'curiosities-text': 'I have been a scout since 2018 and grew up within the movement, which taught me about teamwork, leadership, and caring for people and the world. I participate in cleanup actions, hiking, and experiences that remind me that life knowledge is as important as technical knowledge.',
    'curiosities-text-2': 'Outside the uniform, I am naturally curious: I love reading, assembling huge puzzles, and listening to music. Concerts and festivals enchant me with the unique energy that only live music provides.',
    'curiosities-text-3': 'These passions reflect who I am: someone who likes to learn, connect, and explore the world.',
    'curiosities-photo-alt': 'Volunteer Activities',
    
    academic: 'Academic Life',
    'academic-text': 'I am currently studying Systems Analysis and Development at FATEC Rubens Lara, where I have been building my foundation in technology and exploring different areas that spark my interest.',
    'academic-text-2': 'Although college is just one part of my journey, I always seek to go beyond classroom content. I have learned a lot on my own, taking courses and working on side projects (available on my GitHub), and I enjoy transforming these learnings into practical experiences.',
    'academic-text-3': 'For me, studying is more about curiosity and constant evolution than about titles, and that is what guides my academic journey so far.',
    'academic-photo-alt': 'Dhara\'s Academic Life',
    
    // Timeline translations
    'timeline-date-1': 'February 2025',
    'timeline-title-1': 'Started at ModalGR Consulting',
    'timeline-desc-1': 'I started at ModalGR consulting (now Mosten) through the training process as a QA intern, taking my first steps in the Quality Assurance field.',
    'modalgr-photo-alt': 'ModalGR/Mosten',
    
    'timeline-date-2': 'April 2025',
    'timeline-title-2': 'Promoted to QA Jr',
    'timeline-desc-2': 'I was promoted in record time at the company, becoming a QA Jr and demonstrating my commitment and learning ability in the field.',
    
    'timeline-date-3': 'Currently',
    'timeline-title-3': 'QA Jr at Mosten',
    'timeline-desc-3': 'I continue as QA Jr at Mosten, executing manual tests and automated tests via Cypress. I use Azure DevOps to organize tasks and maintain an automated test pipeline that runs with every production change, maintaining continuous testing flow and avoiding human errors.',
    'current-work-photo-alt': 'Current Work',
    
    'qa-engineer': 'QUALITY ANALYST',
    'portfolio-subtitle': 'Quality Assurance Portfolio',
    'get-in-touch': 'Get in touch',
    'add-photo': 'Add your photo here',
    
    // Contact section
    'contact': 'CONTACT',
    'email': 'Email',
    'phone': 'Phone',
    'github': 'GitHub',
    'linkedin': 'LinkedIn'
  }
};

function setLanguage(lang) {
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (translations[lang][key]) {
      el.textContent = translations[lang][key];
    }
  });
  
  // Salvar preferência de idioma
  localStorage.setItem('portfolio-language', lang);
}

// Navegação suave
function smoothScroll() {
  document.querySelectorAll('.nav-links a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
}

// Seletor de idioma personalizado
function initLanguageSelector() {
  const languageToggle = document.getElementById('language-toggle');
  const languageDropdown = document.getElementById('language-dropdown');
  const languageOptions = document.querySelectorAll('.language-option');
  
  // Toggle dropdown
  languageToggle.addEventListener('click', (e) => {
    e.stopPropagation();
    languageDropdown.classList.toggle('show');
  });
  
  // Fechar dropdown ao clicar fora
  document.addEventListener('click', () => {
    languageDropdown.classList.remove('show');
  });
  
  // Prevenir fechamento ao clicar no dropdown
  languageDropdown.addEventListener('click', (e) => {
    e.stopPropagation();
  });
  
  // Event listeners para opções de idioma
  languageOptions.forEach(option => {
    option.addEventListener('click', () => {
      const selectedLang = option.getAttribute('data-lang');
      setLanguage(selectedLang);
      updateLanguageDisplay(selectedLang);
      languageDropdown.classList.remove('show');
    });
  });
}

function updateLanguageDisplay(lang) {
  const currentLanguageSpan = document.getElementById('current-language');
  currentLanguageSpan.textContent = lang === 'pt-br' ? 'PT' : 'EN';
}

// Inicialização
document.addEventListener('DOMContentLoaded', () => {
  // Carregar idioma salvo ou padrão
  const savedLanguage = localStorage.getItem('portfolio-language') || 'pt-br';
  setLanguage(savedLanguage);
  updateLanguageDisplay(savedLanguage);
  
  // Inicializar seletor de idioma
  initLanguageSelector();
  
  // Inicializar funcionalidades
  smoothScroll();
  
  // Debug para imagens que não carregam
  const images = document.querySelectorAll('img');
  images.forEach(img => {
    // Verificar se já foi processada
    if (img.dataset.processed) return;
    img.dataset.processed = 'true';
    
    // Verificar se a imagem existe
    const testImg = new Image();
    testImg.onload = function() {
      // Imagem existe, manter visível
      img.style.display = 'block';
    };
    
    testImg.onerror = function() {
      // Imagem não existe, criar placeholder
      console.log('Imagem não encontrada:', img.src);
      img.style.display = 'none';
      
      // Verificar se já existe placeholder no container
      const container = img.parentNode;
      if (container.querySelector('.image-placeholder-custom')) {
        return; // Já existe placeholder
      }
      
      // Criar placeholder personalizado
      const placeholder = document.createElement('div');
      placeholder.className = 'image-placeholder-custom';
      placeholder.textContent = 'Adicione sua foto aqui';
      
      // Determinar tamanho baseado no contexto
      const isTimeline = img.closest('.timeline-image');
      const size = isTimeline ? '280px' : '350px';
      const borderRadius = isTimeline ? '15px' : '20px';
      
      placeholder.style.cssText = `
        width: ${size};
        height: ${size};
        background: var(--bg-secondary);
        border-radius: ${borderRadius};
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-secondary);
        border: 3px solid var(--accent-primary);
        font-size: 1rem;
        text-align: center;
        box-shadow: 0 15px 35px var(--shadow);
        position: relative;
        margin: 0 auto;
      `;
      
      // Adicionar elemento decorativo
      const decoration = document.createElement('div');
      decoration.style.cssText = `
        position: absolute;
        top: 30%;
        left: 30%;
        width: 40%;
        height: 40%;
        background: var(--accent-secondary);
        border-radius: 50%;
        opacity: 0.3;
        z-index: -1;
      `;
      placeholder.appendChild(decoration);
      
      container.appendChild(placeholder);
    };
    
    testImg.src = img.src;
    
    img.addEventListener('load', function() {
      console.log('Imagem carregada com sucesso:', this.src);
    });
  });
});

// Language selector functions
function initializeLanguageSelector() {
    const languageButton = document.getElementById('languageButton');
    const languageDropdown = document.getElementById('languageDropdown');
    const languageOptions = document.querySelectorAll('.language-option');
    
    if (!languageButton || !languageDropdown) return;
    
    // Toggle dropdown
    languageButton.addEventListener('click', (e) => {
        e.stopPropagation();
        languageDropdown.classList.toggle('show');
    });
    
    // Close dropdown when clicking outside
    document.addEventListener('click', () => {
        languageDropdown.classList.remove('show');
    });
    
    // Handle language selection
    languageOptions.forEach(option => {
        option.addEventListener('click', (e) => {
            e.stopPropagation();
            const lang = option.getAttribute('data-lang');
            setLanguage(lang);
            languageDropdown.classList.remove('show');
        });
    });
}

// DOM Content Loaded
document.addEventListener('DOMContentLoaded', function() {
    initializeLanguageSelector();
    initializeImagesWithFallback();
    smoothScroll();
    
    // Set initial language
    const savedLang = localStorage.getItem('language') || 'pt';
    setLanguage(savedLang);
});
